# Лабораторная работа № 4

# Библиотечная система - симуляция

Проект реализует систему управления библиотекой с поддержкой как бумажных, так и электронных книг, включая псевдослучайную симуляцию библиотечных операций.

## Структура проекта

```

├── src
│   ├── __init__.py
│   ├── book.py
│   ├── collection.py
│   ├── data.py
│   ├── library.py
│   ├── main.py
│   └── simulation.py
├── tests
│   ├── __init__.py
│   ├── test_book.py
│   ├── test_collection.py
│   ├── test_library.py
│   └── test_simulation.py
├── README.md
├── pyproject.toml
├── requirements.txt
└── uv.lock
```

## Основные возможности

### Классы книг
- **Book** - базовый класс книги с полями: title, author, year, genre, isbn
- **PrintedBook** - бумажная книга (доп. поля: pages, weight, cover_type)
- **Ebook** - электронная книга (доп. поля: file_size, format_type, drm_protected)

### Пользовательские коллекции
1. **BookCollection** (наследник UserList):
   - Список всех книг в библиотеке
   - Поддержка индексации, срезов, итерации
   - Методы добавления/удаления

2. **IndexDict** (наследник UserDict):
   - Индексация книг по ISBN, автору и году
   - Автоматическое обновление индексов при изменении коллекции
   - Быстрый поиск по различным критериям

### Библиотека
Класс **Library** объединяет:
- BookCollection для хранения книг
- IndexDict для быстрого поиска
- Методы: add_book, remove_book, update_book, find_author, find_year, find_isbn

##  Симуляция

Функция `run_simulation()` выполняет псевдослучайную симуляцию библиотечных операций:

### Типы событий:
1. **Добавление бумажной книги** - случайные параметры (страницы, вес, тип обложки)
2. **Добавление электронной книги** - случайный формат, размер файла, DRM-защита
3. **Удаление случайной книги** 
4. **Обновление информации о книге** (название, автор, год, жанр)
5. **Поиск книг по автору**
6. **Поиск книг по году издания**


### Варианты запуска симуляции:
1. **Случайная симуляция** - нажать Enter
2. **Детерминированная симуляция** - ввести число (seed)
3. **Выход** - ввести "exit"



##  Пример вывода симуляции

```
1) Добавлена бумажная книга: 'Война и мир' (Лев Толстой, 1869), 542 стр., 450г
2) Добавлена электронная книга: '1984' (Джордж Оруэлл, 1949), EPUB, 12MB
3) Поиск по автору 'Лев Толстой': найдено 1 книг
...
20) Удалена книга
Итоговое количество книг в библиотеке: 7
```

## Тестирование

Тесты покрывают:
- Классы Book, PrintedBook, Ebook
- Пользовательские коллекции
- Класс Library
- Симуляцию